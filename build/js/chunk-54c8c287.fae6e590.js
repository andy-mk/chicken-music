(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54c8c287"],{"2a00":function(t,n,i){"use strict";var e=i("f421"),s=i.n(e);s.a},"622e":function(t,n,i){"use strict";var e=i("b2da"),s=i.n(e);s.a},"7f5c":function(t,n,i){"use strict";i.d(n,"b",function(){return r}),i.d(n,"a",function(){return c});var e=i("bc3a"),s=i.n(e),a=i("da71");function r(){return s.a.get("".concat(a["a"],"/top/artists?limit=100")).then(function(t){return t.data.artists})}function c(t){return s.a.get("".concat(a["a"],"/artists?id=").concat(t)).then(function(t){return t.data})}},a381:function(t,n,i){"use strict";i.d(n,"a",function(){return u}),i.d(n,"b",function(){return f});i("6b54"),i("ac6a"),i("7f7f");var e=i("d225"),s=i("b0b4"),a=i("da71"),r=i("351b"),c=i("bc3a"),l=i.n(c),o=new r["a"]("like"),u=function(){function t(n){var i=n.id,s=n.name,a=n.singer,r=n.image,c=n.duration,l=n.like;Object(e["a"])(this,t),this.id=i,this.name=s,this.singer=a,this.image=r,this.duration=c,this.like=l}return Object(s["a"])(t,[{key:"getUrl",value:function(){return l.a.get("".concat(a["a"],"/song/url?id=").concat(this.id)).then(function(t){var n=t.data.data[0].url;return n})}},{key:"getLyric",value:function(){return l.a.get("".concat(a["a"],"/lyric?id=").concat(this.id)).then(function(t){if(t.data.nolyric)return"";var n=t.data.lrc.lyric;return n})}}]),t}();function g(t){var n="";return t.forEach(function(i,e){e===t.length-1?n+=i.name:n+=i.name+" / "}),n}function h(t){for(var n=o.get(),i=0;i<n.length;i++)if(n[i]===t.toString())return!0;return!1}function f(t){return new u({id:t.id,name:t.name,singer:g(t.ar),image:t.al.picUrl,duration:t.dt/1e3,like:h(t.id)})}u.getDetail=function(t){return l.a.get("".concat(a["a"],"/song/detail?ids=").concat(t)).then(function(t){return t.data.songs})}},a69d:function(t,n,i){"use strict";var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"playlist-detail"},[i("div",{ref:"header",staticClass:"header"},[i("h2",{staticClass:"title"},[t._v(t._s(t.title))]),i("div",{staticClass:"back",on:{click:t.back}},[i("i",{staticClass:"iconfont icon-fanhui"})])]),i("div",{ref:"bgImage",staticClass:"bg",style:t.bgImageStyle()},[i("div",{staticClass:"filter"}),i("div",{staticClass:"play-wrapper"},[i("div",{ref:"play",staticClass:"play",on:{click:t.playAll}},[i("i",{staticClass:"iconfont icon-zanting"}),i("span",{staticClass:"text"},[t._v("播放全部")])])])]),i("div",{ref:"songlistContainer",staticClass:"songlist-container"},[i("Scroll",{attrs:{data:t.songlist,probeType:3},on:{scroll:t.scroll}},[i("ul",{staticClass:"songlist"},t._l(t.songlist,function(n,e){return i("li",{key:n.id,staticClass:"songlist-item",on:{click:function(n){return t.selectItem(e)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.rank,expression:"rank"}],staticClass:"rank"},[i("span",{class:t.normalRank(e+1),domProps:{textContent:t._s(e>2?e:"")}})]),i("div",{staticClass:"content"},[i("h2",{staticClass:"name"},[t._v(t._s(n.name))]),i("span",{staticClass:"singer"},[t._v(t._s(n.singer))])])])}),0)]),i("div",{ref:"bgLayer",staticClass:"bg-layer"})],1),i("Loading",{directives:[{name:"show",rawName:"v-show",value:!t.songlist.length,expression:"!songlist.length"}],attrs:{fixed:!0}})],1)},s=[],a=(i("28a5"),i("cebc")),r=i("b3df"),c=i("c154"),l=i("2f62"),o=i("b06f"),u=i("1a55"),g=Object(o["a"])("transform"),h={mixins:[u["a"]],props:{title:{type:String,default:""},bgImage:{type:String,default:""},songlist:{type:Array,default:function(){return[]}}},data:function(){return{rank:!1}},methods:Object(a["a"])({},Object(l["b"])(["setPlaylist","setFullScreen","setCurrentSong","setSequenceList","setCurrentIndex","setPlaying"]),{back:function(){this.$router.back()},bgImageStyle:function(){return"background-image: url('".concat(this.bgImage,"')")},scroll:function(t){var n=t.y,i=this.$refs.bgLayer,e=this.$refs.header,s=this.$refs.bgImage;if(this.gapHeight||(this.gapHeight=s.clientHeight-e.clientHeight),Math.abs(n)>this.gapHeight?(i.style[g]="translate3d(0, ".concat(-this.gapHeight,"px, 0)"),s.style.paddingTop=0,s.style.height=e.clientHeight+"px",s.style.zIndex=10,this.$refs.play.style.display="none"):(i.style[g]="translate3d(0, ".concat(n,"px, 0)"),s.style.paddingTop="70%",s.style.height=0,s.style.zIndex=0,this.$refs.play.style.display="block"),n>0){var a=1+n/(s.clientHeight-110);s.style[g]="scale(".concat(a,")")}},selectItem:function(t){this.setFullScreen(!0),this.setPlaylist(this.songlist),this.setSequenceList(this.songlist),this.setCurrentIndex(t),this.setCurrentSong(this.songlist[t])},playAll:function(){if(0!==this.songlist.length){var t=0;this.setPlaylist(this.songlist),this.setSequenceList(this.songlist),this.setCurrentIndex(t),this.setCurrentSong(this.songlist[t]),this.setPlaying(!0)}},normalRank:function(t){return 1===t?"icon icon1":2===t?"icon icon2":3===t?"icon icon3":"text"},_initData:function(){this.gapHeight=null,this.rank="rank"===this.$route.path.split("/")[1]}}),computed:Object(a["a"])({},Object(l["c"])(["playlist"])),components:{Scroll:r["a"],Loading:c["a"]},watch:{playlist:function(t){this._resetScroll(t,this.$refs.songlistContainer)}},created:function(){this._initData()},mounted:function(){this._resetScroll(this.playlist,this.$refs.songlistContainer)}},f=h,d=(i("622e"),i("2877")),p=Object(d["a"])(f,e,s,!1,null,"1563ba3c",null);n["a"]=p.exports},b2da:function(t,n,i){},f421:function(t,n,i){},fdc5:function(t,n,i){"use strict";i.r(n);var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"singer-detail"},[i("ListView",{attrs:{title:t.title,bgImage:t.bgImage,songlist:t.songlist}})],1)},s=[],a=(i("ac6a"),i("7f7f"),i("7f5c")),r=i("a381"),c=i("a69d"),l={data:function(){return{title:"",bgImage:"",songlist:[]}},methods:{_getSingerDetail:function(){var t=this,n=this.$route.params.id;Object(a["a"])(n).then(function(n){t.title=n.artist.name,t.bgImage=n.artist.picUrl;var i="";return n.hotSongs.forEach(function(t,e){i+=e===n.hotSongs.length-1?t.id:t.id+","}),r["a"].getDetail(i)}).then(function(n){var i=[];n.forEach(function(t,n){i.push(Object(r["b"])(t))}),t.songlist=i})}},components:{ListView:c["a"]},created:function(){this._getSingerDetail()}},o=l,u=(i("2a00"),i("2877")),g=Object(u["a"])(o,e,s,!1,null,"5733ec96",null);n["default"]=g.exports}}]);
//# sourceMappingURL=chunk-54c8c287.fae6e590.js.map