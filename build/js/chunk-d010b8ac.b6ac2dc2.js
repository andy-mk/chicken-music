(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d010b8ac"],{"2a75":function(t,i,e){},"4b2b":function(t,i,e){"use strict";var n=e("2a75"),s=e.n(n);s.a},"622e":function(t,i,e){"use strict";var n=e("b2da"),s=e.n(n);s.a},a381:function(t,i,e){"use strict";e.d(i,"a",function(){return u}),e.d(i,"b",function(){return f});e("6b54"),e("ac6a"),e("7f7f");var n=e("d225"),s=e("b0b4"),a=e("da71"),l=e("351b"),r=e("bc3a"),c=e.n(r),o=new l["a"]("like"),u=function(){function t(i){var e=i.id,s=i.name,a=i.singer,l=i.image,r=i.duration,c=i.like;Object(n["a"])(this,t),this.id=e,this.name=s,this.singer=a,this.image=l,this.duration=r,this.like=c}return Object(s["a"])(t,[{key:"getUrl",value:function(){return c.a.get("".concat(a["a"],"/song/url?id=").concat(this.id)).then(function(t){var i=t.data.data[0].url;return i})}},{key:"getLyric",value:function(){return c.a.get("".concat(a["a"],"/lyric?id=").concat(this.id)).then(function(t){if(t.data.nolyric)return"";var i=t.data.lrc.lyric;return i})}}]),t}();function g(t){var i="";return t.forEach(function(e,n){n===t.length-1?i+=e.name:i+=e.name+" / "}),i}function h(t){for(var i=o.get(),e=0;e<i.length;e++)if(i[e]===t.toString())return!0;return!1}function f(t){return new u({id:t.id,name:t.name,singer:g(t.ar),image:t.al.picUrl,duration:t.dt/1e3,like:h(t.id)})}u.getDetail=function(t){return c.a.get("".concat(a["a"],"/song/detail?ids=").concat(t)).then(function(t){return t.data.songs})}},a69d:function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"playlist-detail"},[e("div",{ref:"header",staticClass:"header"},[e("h2",{staticClass:"title"},[t._v(t._s(t.title))]),e("div",{staticClass:"back",on:{click:t.back}},[e("i",{staticClass:"iconfont icon-fanhui"})])]),e("div",{ref:"bgImage",staticClass:"bg",style:t.bgImageStyle()},[e("div",{staticClass:"filter"}),e("div",{staticClass:"play-wrapper"},[e("div",{ref:"play",staticClass:"play",on:{click:t.playAll}},[e("i",{staticClass:"iconfont icon-zanting"}),e("span",{staticClass:"text"},[t._v("播放全部")])])])]),e("div",{ref:"songlistContainer",staticClass:"songlist-container"},[e("Scroll",{attrs:{data:t.songlist,probeType:3},on:{scroll:t.scroll}},[e("ul",{staticClass:"songlist"},t._l(t.songlist,function(i,n){return e("li",{key:i.id,staticClass:"songlist-item",on:{click:function(i){return t.selectItem(n)}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.rank,expression:"rank"}],staticClass:"rank"},[e("span",{class:t.normalRank(n+1),domProps:{textContent:t._s(n>2?n:"")}})]),e("div",{staticClass:"content"},[e("h2",{staticClass:"name"},[t._v(t._s(i.name))]),e("span",{staticClass:"singer"},[t._v(t._s(i.singer))])])])}),0)]),e("div",{ref:"bgLayer",staticClass:"bg-layer"})],1),e("Loading",{directives:[{name:"show",rawName:"v-show",value:!t.songlist.length,expression:"!songlist.length"}],attrs:{fixed:!0}})],1)},s=[],a=(e("28a5"),e("cebc")),l=e("b3df"),r=e("c154"),c=e("2f62"),o=e("b06f"),u=e("1a55"),g=Object(o["a"])("transform"),h={mixins:[u["a"]],props:{title:{type:String,default:""},bgImage:{type:String,default:""},songlist:{type:Array,default:function(){return[]}}},data:function(){return{rank:!1}},methods:Object(a["a"])({},Object(c["b"])(["setPlaylist","setFullScreen","setCurrentSong","setSequenceList","setCurrentIndex","setPlaying"]),{back:function(){this.$router.back()},bgImageStyle:function(){return"background-image: url('".concat(this.bgImage,"')")},scroll:function(t){var i=t.y,e=this.$refs.bgLayer,n=this.$refs.header,s=this.$refs.bgImage;if(this.gapHeight||(this.gapHeight=s.clientHeight-n.clientHeight),Math.abs(i)>this.gapHeight?(e.style[g]="translate3d(0, ".concat(-this.gapHeight,"px, 0)"),s.style.paddingTop=0,s.style.height=n.clientHeight+"px",s.style.zIndex=10,this.$refs.play.style.display="none"):(e.style[g]="translate3d(0, ".concat(i,"px, 0)"),s.style.paddingTop="70%",s.style.height=0,s.style.zIndex=0,this.$refs.play.style.display="block"),i>0){var a=1+i/(s.clientHeight-110);s.style[g]="scale(".concat(a,")")}},selectItem:function(t){this.setFullScreen(!0),this.setPlaylist(this.songlist),this.setSequenceList(this.songlist),this.setCurrentIndex(t),this.setCurrentSong(this.songlist[t])},playAll:function(){if(0!==this.songlist.length){var t=0;this.setPlaylist(this.songlist),this.setSequenceList(this.songlist),this.setCurrentIndex(t),this.setCurrentSong(this.songlist[t]),this.setPlaying(!0)}},normalRank:function(t){return 1===t?"icon icon1":2===t?"icon icon2":3===t?"icon icon3":"text"},_initData:function(){this.gapHeight=null,this.rank="rank"===this.$route.path.split("/")[1]}}),computed:Object(a["a"])({},Object(c["c"])(["playlist"])),components:{Scroll:l["a"],Loading:r["a"]},watch:{playlist:function(t){this._resetScroll(t,this.$refs.songlistContainer)}},created:function(){this._initData()},mounted:function(){this._resetScroll(this.playlist,this.$refs.songlistContainer)}},f=h,d=(e("622e"),e("2877")),p=Object(d["a"])(f,n,s,!1,null,"1563ba3c",null);i["a"]=p.exports},b2da:function(t,i,e){},ff3a:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{ref:"songDetail",staticClass:"song-detail"},[e("ListView",{attrs:{title:t.title,bgImage:t.bgImage,songlist:t.songlist}})],1)},s=[],a=(e("ac6a"),e("7f7f"),e("cebc")),l=e("2f62"),r=e("bc3a"),c=e.n(r),o=e("da71");function u(t){return c.a.get(o["a"]+"/playlist/detail?id=".concat(t)).then(function(t){return t.data.playlist})}var g=e("a381"),h=e("1a55"),f=e("a69d"),d={mixins:[h["a"]],data:function(){return{title:"",bgImage:"",songlist:[]}},computed:Object(a["a"])({},Object(l["c"])(["playlist"])),methods:{_getSonglistDetail:function(){var t=this,i=this.$route.params.id;u(i).then(function(i){t.title=i.name,t.bgImage=i.coverImgUrl;var e=i.tracks,n="";return e.forEach(function(t,i){n+=i===e.length-1?t.id:t.id+","}),g["a"].getDetail(n)}).then(function(i){var e=[];i.forEach(function(t,i){e.push(Object(g["b"])(t))}),t.songlist=e})}},watch:{playlist:function(){this._resetScroll(this.playlist,this.$refs.songDetail)}},components:{ListView:f["a"]},created:function(){this._getSonglistDetail()},mounted:function(){this._resetScroll(this.playlist,this.$refs.songDetail)}},p=d,b=(e("4b2b"),e("2877")),y=Object(b["a"])(p,n,s,!1,null,"1a733ae6",null);i["default"]=y.exports}}]);
//# sourceMappingURL=chunk-d010b8ac.b6ac2dc2.js.map