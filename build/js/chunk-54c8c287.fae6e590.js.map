{"version":3,"sources":["webpack:///./src/components/singer-detail/SingerDetail.vue?0cf9","webpack:///./src/components/listview/ListView.vue?00bd","webpack:///./src/api/singer.js","webpack:///./src/base/js/song.js","webpack:///./src/components/listview/ListView.vue?7b2a","webpack:///src/components/listview/ListView.vue","webpack:///./src/components/listview/ListView.vue?01c8","webpack:///./src/components/listview/ListView.vue","webpack:///./src/components/singer-detail/SingerDetail.vue?43cc","webpack:///src/components/singer-detail/SingerDetail.vue","webpack:///./src/components/singer-detail/SingerDetail.vue?3b47","webpack:///./src/components/singer-detail/SingerDetail.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SingerDetail_vue_vue_type_style_index_0_id_5733ec96_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SingerDetail_vue_vue_type_style_index_0_id_5733ec96_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ListView_vue_vue_type_style_index_0_id_1563ba3c_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ListView_vue_vue_type_style_index_0_id_1563ba3c_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","d","__webpack_exports__","getSingerList","getSingerDetail","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","_config__WEBPACK_IMPORTED_MODULE_1__","axios","get","concat","domain","then","res","data","artists","id","stroage","Stroage","Song","_ref","name","singer","image","duration","like","Object","C_Users_Mark_Desktop_project_chicken_music_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","this","url","nolyric","lyric","lrc","filterName","arr","forEach","item","index","length","i","toString","createSong","ar","al","picUrl","dt","getDetail","songs","render","_vm","_h","$createElement","_c","_self","staticClass","ref","_v","_s","title","on","click","back","style","bgImageStyle","playAll","attrs","songlist","probeType","scroll","_l","key","$event","selectItem","directives","rawName","value","expression","class","normalRank","domProps","textContent","fixed","staticRenderFns","transform","dom","ListViewvue_type_script_lang_js_","mixins","mixin","props","type","String","default","bgImage","Array","rank","methods","objectSpread","vuex_esm","$router","y","bgLayer","$refs","header","gapHeight","clientHeight","Math","abs","paddingTop","height","zIndex","play","display","scale","setFullScreen","setPlaylist","setSequenceList","setCurrentIndex","setCurrentSong","setPlaying","_initData","$route","path","split","computed","components","Scroll","Loading","watch","playlist","list","_resetScroll","songlistContainer","created","mounted","listview_ListViewvue_type_script_lang_js_","component","componentNormalizer","SingerDetailvue_type_script_lang_js_","_getSingerDetail","_this","params","artist","ids","hotSongs","song","push","ListView","singer_detail_SingerDetailvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-54c8c287.fae6e590.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingerDetail.vue?vue&type=style&index=0&id=5733ec96&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingerDetail.vue?vue&type=style&index=0&id=5733ec96&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListView.vue?vue&type=style&index=0&id=1563ba3c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListView.vue?vue&type=style&index=0&id=1563ba3c&lang=scss&scoped=true&\"","import axios from 'axios'\r\nimport { domain } from './config'\r\n\r\nexport function getSingerList() {\r\n  return axios.get(`${domain}/top/artists?limit=100`).then(res => {\r\n    return res.data.artists\r\n  })\r\n}\r\n\r\nexport function getSingerDetail(id) {\r\n  return axios.get(`${domain}/artists?id=${id}`).then(res => {\r\n    return res.data\r\n  })\r\n}\r\n","import { domain } from 'api/config'\r\nimport Stroage from './stroage'\r\nimport axios from 'axios'\r\n\r\n// eslint-disable-next-line\r\nconst stroage = new Stroage('like')\r\n\r\nclass Song {\r\n  constructor({ id, name, singer, image, duration, like }) {\r\n    this.id = id\r\n    this.name = name\r\n    this.singer = singer\r\n    this.image = image\r\n    this.duration = duration\r\n    this.like = like\r\n  }\r\n\r\n  getUrl() {\r\n    return axios.get(`${domain}/song/url?id=${this.id}`).then(res => {\r\n      let url = res.data.data[0].url\r\n      return url\r\n    })\r\n  }\r\n\r\n  getLyric() {\r\n    return axios.get(`${domain}/lyric?id=${this.id}`).then(res => {\r\n      if (res.data.nolyric) {\r\n        return ''\r\n      }\r\n      let lyric = res.data.lrc.lyric\r\n      return lyric\r\n    })\r\n  }\r\n}\r\n\r\nSong.getDetail = function(id) {\r\n  return axios.get(`${domain}/song/detail?ids=${id}`).then(res => {\r\n    return res.data.songs\r\n  })\r\n}\r\n\r\nfunction filterName(arr) {\r\n  let singer = ''\r\n  arr.forEach((item, index) => {\r\n    index === arr.length - 1 ? singer += item.name : singer += item.name + ' / '\r\n  })\r\n  return singer\r\n}\r\n\r\nfunction like(id) {\r\n  let arr = stroage.get()\r\n  for (let i = 0; i < arr.length; i++) {\r\n    if (arr[i] === id.toString()) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nfunction createSong(data) {\r\n  return new Song({\r\n    id: data.id,\r\n    name: data.name,\r\n    singer: filterName(data.ar),\r\n    image: data.al.picUrl,\r\n    duration: data.dt / 1000,\r\n    like: like(data.id)\r\n  })\r\n}\r\n\r\nexport {\r\n  Song,\r\n  createSong\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"playlist-detail\"},[_c('div',{ref:\"header\",staticClass:\"header\"},[_c('h2',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"iconfont icon-fanhui\"})])]),_c('div',{ref:\"bgImage\",staticClass:\"bg\",style:(_vm.bgImageStyle())},[_c('div',{staticClass:\"filter\"}),_c('div',{staticClass:\"play-wrapper\"},[_c('div',{ref:\"play\",staticClass:\"play\",on:{\"click\":_vm.playAll}},[_c('i',{staticClass:\"iconfont icon-zanting\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"播放全部\")])])])]),_c('div',{ref:\"songlistContainer\",staticClass:\"songlist-container\"},[_c('Scroll',{attrs:{\"data\":_vm.songlist,\"probeType\":3},on:{\"scroll\":_vm.scroll}},[_c('ul',{staticClass:\"songlist\"},_vm._l((_vm.songlist),function(item,index){return _c('li',{key:item.id,staticClass:\"songlist-item\",on:{\"click\":function($event){return _vm.selectItem(index)}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.rank),expression:\"rank\"}],staticClass:\"rank\"},[_c('span',{class:_vm.normalRank(index+1),domProps:{\"textContent\":_vm._s(index > 2 ? index : '')}})]),_c('div',{staticClass:\"content\"},[_c('h2',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))]),_c('span',{staticClass:\"singer\"},[_vm._v(_vm._s(item.singer))])])])}),0)]),_c('div',{ref:\"bgLayer\",staticClass:\"bg-layer\"})],1),_c('Loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songlist.length),expression:\"!songlist.length\"}],attrs:{\"fixed\":true}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"playlist-detail\">\r\n    <div class=\"header\" ref=\"header\">\r\n      <h2 class=\"title\">{{ title }}</h2>\r\n      <div class=\"back\" @click=\"back\">\r\n        <i class=\"iconfont icon-fanhui\"></i>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"bg\" ref=\"bgImage\" :style=\"bgImageStyle()\">\r\n      <div class=\"filter\"></div>\r\n      <div class=\"play-wrapper\">\r\n        <div class=\"play\" ref=\"play\" @click=\"playAll\">\r\n          <i class=\"iconfont icon-zanting\"></i>\r\n          <span class=\"text\">播放全部</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"songlist-container\" ref=\"songlistContainer\">\r\n      <Scroll :data=\"songlist\" @scroll=\"scroll\" :probeType=\"3\">\r\n        <ul class=\"songlist\">\r\n          <li class=\"songlist-item\" :key=\"item.id\" v-for=\"(item,index) of songlist\" @click=\"selectItem(index)\">\r\n            <div class=\"rank\" v-show=\"rank\">\r\n              <span :class=\"normalRank(index+1)\" v-text=\"index > 2 ? index : ''\"></span>\r\n            </div>\r\n            <div class=\"content\">\r\n              <h2 class=\"name\">{{ item.name }}</h2>\r\n              <span class=\"singer\">{{ item.singer }}</span>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </Scroll>\r\n      <div class=\"bg-layer\" ref=\"bgLayer\"></div>\r\n    </div>\r\n\r\n    <Loading :fixed=\"true\" v-show=\"!songlist.length\"></Loading>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Scroll from 'components/scroll/Scroll'\r\nimport Loading from 'components/loading/Loading'\r\n\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport { prefixStyle } from 'base/js/dom'\r\nimport Mixin from 'base/js/mixin'\r\n\r\nconst transform = prefixStyle('transform')\r\n\r\nexport default {\r\n  mixins: [Mixin],\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    bgImage: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    songlist: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      rank: false\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'setPlaylist',\r\n      'setFullScreen',\r\n      'setCurrentSong',\r\n      'setSequenceList',\r\n      'setCurrentIndex',\r\n      'setPlaying'\r\n    ]),\r\n    back() {\r\n      this.$router.back()\r\n    },\r\n    bgImageStyle() {\r\n      return `background-image: url('${this.bgImage}')`\r\n    },\r\n    scroll({ y }) {\r\n      const bgLayer = this.$refs.bgLayer\r\n      const header = this.$refs.header\r\n      const bgImage = this.$refs.bgImage\r\n      if (!this.gapHeight) {\r\n        this.gapHeight = bgImage.clientHeight - header.clientHeight\r\n      }\r\n\r\n      if (Math.abs(y) > this.gapHeight) {\r\n        bgLayer.style[transform] = `translate3d(0, ${-this.gapHeight}px, 0)`\r\n        bgImage.style.paddingTop = 0\r\n        bgImage.style.height = header.clientHeight + 'px'\r\n        bgImage.style.zIndex = 10\r\n        this.$refs.play.style.display = 'none'\r\n      } else {\r\n        bgLayer.style[transform] = `translate3d(0, ${y}px, 0)`\r\n        bgImage.style.paddingTop = '70%'\r\n        bgImage.style.height = 0\r\n        bgImage.style.zIndex = 0\r\n        this.$refs.play.style.display = 'block'\r\n      }\r\n\r\n      if (y > 0) {\r\n        let scale = 1 + y / (bgImage.clientHeight - 110)\r\n        bgImage.style[transform] = `scale(${scale})`\r\n      }\r\n    },\r\n    selectItem(index) {\r\n      this.setFullScreen(true)\r\n      this.setPlaylist(this.songlist)\r\n      this.setSequenceList(this.songlist)\r\n      this.setCurrentIndex(index)\r\n      this.setCurrentSong(this.songlist[index])\r\n    },\r\n    playAll() {\r\n      if (this.songlist.length === 0) {\r\n        return\r\n      }\r\n      let index = 0\r\n      this.setPlaylist(this.songlist)\r\n      this.setSequenceList(this.songlist)\r\n      this.setCurrentIndex(index)\r\n      this.setCurrentSong(this.songlist[index])\r\n      this.setPlaying(true)\r\n    },\r\n    normalRank(index) {\r\n      if (index === 1) return 'icon icon1'\r\n      if (index === 2) return 'icon icon2'\r\n      if (index === 3) return 'icon icon3'\r\n      return 'text'\r\n    },\r\n    _initData() {\r\n      // 控制动画的一个变量，代表header底部距离bg底部的距离\r\n      this.gapHeight = null\r\n\r\n      this.rank = this.$route.path.split('/')[1] === 'rank' ? true : false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'playlist'\r\n    ])\r\n  },\r\n  components: {\r\n    Scroll,\r\n    Loading\r\n  },\r\n  watch: {\r\n    playlist(list) {\r\n      this._resetScroll(list, this.$refs.songlistContainer)\r\n    }\r\n  },\r\n  created() {\r\n    this._initData()\r\n  },\r\n  mounted() {\r\n    this._resetScroll(this.playlist, this.$refs.songlistContainer)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  @import 'base/styles/variable.scss';\r\n\r\n  .playlist-detail {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    background-color: $theme-back-color;\r\n\r\n    .loading {\r\n      top: 100px;\r\n    }\r\n\r\n    .header {\r\n      position: relative;\r\n      height: 40px;\r\n      z-index: 11;\r\n\r\n      .back {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 40px;\r\n        line-height: 40px;\r\n        text-align: center;\r\n\r\n        .iconfont {\r\n          color: $theme-color;\r\n          font-size: 20px;\r\n          font-weight: bold;\r\n        }\r\n      }\r\n\r\n      .title {\r\n        width: 70%;\r\n        height: 40px;\r\n        margin: 0 auto;\r\n        color: #ffffff;\r\n        line-height: 40px;\r\n        text-align: center;\r\n        @extend .text-overflow\r\n      }\r\n    }\r\n\r\n    .bg {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      padding-top: 70%;\r\n      overflow: hidden;\r\n      background-color: $theme-back-color;\r\n      background-size: cover;\r\n      background-repeat: no-repeat;\r\n\r\n      .bg-image {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n      }\r\n\r\n      .filter {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: rgba(7,17,27,.4);\r\n      }\r\n\r\n      .play-wrapper {\r\n        position: absolute;\r\n        bottom: 20px;\r\n        width: 100%;\r\n        z-index: 20;\r\n\r\n        .play {\r\n          box-sizing: border-box;\r\n          width: 120px;\r\n          padding: 5px 0;\r\n          margin: 0 auto;\r\n          border: 1px solid $theme-color;\r\n          border-radius: 100px;\r\n          text-align: center;\r\n          line-height: 16px;\r\n          color: $theme-color;\r\n\r\n          .iconfont {\r\n            position: relative;\r\n            top: 1px;\r\n            font-size: 16px;\r\n            margin-right: 6px;\r\n          }\r\n\r\n          .text {\r\n            font-size: 12px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .songlist-container {\r\n      position: fixed;\r\n      top: 263px;\r\n      bottom: 0;\r\n      width: 100%;\r\n\r\n      .scroll-wrapper {\r\n        overflow: visible;\r\n      }\r\n\r\n      .songlist {\r\n        padding: 20px 30px 0 30px;\r\n\r\n        .songlist-item {\r\n          display: flex;\r\n          flex-direction: row;\r\n          align-items: center;\r\n          height: 64px;\r\n\r\n          .rank {\r\n            width: 25px;\r\n            margin-right: 30px;\r\n            text-align: center;\r\n\r\n            .text {\r\n              font-size: 18px;\r\n              color: $theme-color;\r\n            }\r\n\r\n            .icon {\r\n              display: inline-block;\r\n              width: 25px;\r\n              height: 24px;\r\n              background-size: 25px 24px;\r\n\r\n              &.icon1 {\r\n                background-image: url('../../base/image/first@2x.png');\r\n              }\r\n              &.icon2 {\r\n                background-image: url('../../base/image/second@2x.png');\r\n              }\r\n              &.icon3 {\r\n                background-image: url('../../base/image/third@2x.png');\r\n              }\r\n            }\r\n          }\r\n\r\n          .content {\r\n            flex: 1;\r\n            overflow: hidden;\r\n\r\n            .name {\r\n              width: 100%;\r\n              color: #ffffff;\r\n              font-size: 14px;\r\n              line-height: 21px;\r\n              @extend .text-overflow\r\n            }\r\n\r\n            .singer {\r\n              display: block;\r\n              color: hsla(0,0%,100%,.3);\r\n              font-size: 12px;\r\n              margin-top: 4px;\r\n              line-height: 21px;\r\n              @extend .text-overflow\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      .bg-layer {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        bottom: 0;\r\n        width: 100%;\r\n        z-index: -10;\r\n        background-color: $theme-back-color;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListView.vue?vue&type=template&id=1563ba3c&scoped=true&\"\nimport script from \"./ListView.vue?vue&type=script&lang=js&\"\nexport * from \"./ListView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListView.vue?vue&type=style&index=0&id=1563ba3c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1563ba3c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"singer-detail\"},[_c('ListView',{attrs:{\"title\":_vm.title,\"bgImage\":_vm.bgImage,\"songlist\":_vm.songlist}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"singer-detail\">\r\n    <ListView :title=\"title\" :bgImage=\"bgImage\" :songlist=\"songlist\"></ListView>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSingerDetail } from 'api/singer'\r\nimport { Song, createSong } from 'base/js/song'\r\nimport ListView from 'components/listview/ListView'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      title: '',\r\n      bgImage: '',\r\n      songlist: []\r\n    }\r\n  },\r\n  methods: {\r\n    _getSingerDetail() {\r\n      let id = this.$route.params.id\r\n      getSingerDetail(id)\r\n        .then(res => {\r\n          this.title = res.artist.name\r\n          this.bgImage = res.artist.picUrl\r\n          let ids = ''\r\n          res.hotSongs.forEach((item, index) => {\r\n            ids += (index === res.hotSongs.length - 1 ? item.id : item.id + ',')\r\n          })\r\n          return Song.getDetail(ids)\r\n        })\r\n        .then(res => {\r\n          let songlist = []\r\n          res.forEach((item, index) => {\r\n            songlist.push(createSong(item))\r\n          })\r\n          this.songlist = songlist\r\n        })\r\n    }\r\n  },\r\n  components: {\r\n    ListView\r\n  },\r\n  created() {\r\n    this._getSingerDetail()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .singer-detail {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    background-color: #333;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingerDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingerDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SingerDetail.vue?vue&type=template&id=5733ec96&scoped=true&\"\nimport script from \"./SingerDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./SingerDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SingerDetail.vue?vue&type=style&index=0&id=5733ec96&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5733ec96\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}