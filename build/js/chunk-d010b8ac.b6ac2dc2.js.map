{"version":3,"sources":["webpack:///./src/components/songlist-detail/SonglistDetail.vue?9a97","webpack:///./src/components/listview/ListView.vue?00bd","webpack:///./src/base/js/song.js","webpack:///./src/components/listview/ListView.vue?7b2a","webpack:///src/components/listview/ListView.vue","webpack:///./src/components/listview/ListView.vue?01c8","webpack:///./src/components/listview/ListView.vue","webpack:///./src/components/songlist-detail/SonglistDetail.vue?3334","webpack:///./src/api/song.js","webpack:///src/components/songlist-detail/SonglistDetail.vue","webpack:///./src/components/songlist-detail/SonglistDetail.vue?aff9","webpack:///./src/components/songlist-detail/SonglistDetail.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SonglistDetail_vue_vue_type_style_index_0_id_1a733ae6_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SonglistDetail_vue_vue_type_style_index_0_id_1a733ae6_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ListView_vue_vue_type_style_index_0_id_1563ba3c_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ListView_vue_vue_type_style_index_0_id_1563ba3c_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","stroage","Stroage","Song","_ref","id","name","singer","image","duration","like","Object","C_Users_Mark_Desktop_project_chicken_music_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","this","axios","get","concat","domain","then","res","url","data","nolyric","lyric","lrc","filterName","arr","forEach","item","index","length","i","toString","createSong","ar","al","picUrl","dt","getDetail","songs","render","_vm","_h","$createElement","_c","_self","staticClass","ref","_v","_s","title","on","click","back","style","bgImageStyle","playAll","attrs","songlist","probeType","scroll","_l","key","$event","selectItem","directives","rawName","value","expression","class","normalRank","domProps","textContent","fixed","staticRenderFns","transform","dom","ListViewvue_type_script_lang_js_","mixins","mixin","props","type","String","default","bgImage","Array","rank","methods","objectSpread","vuex_esm","$router","y","bgLayer","$refs","header","gapHeight","clientHeight","Math","abs","paddingTop","height","zIndex","play","display","scale","setFullScreen","setPlaylist","setSequenceList","setCurrentIndex","setCurrentSong","setPlaying","_initData","$route","path","split","computed","components","Scroll","Loading","watch","playlist","list","_resetScroll","songlistContainer","created","mounted","listview_ListViewvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","getSonglistDetail","SonglistDetailvue_type_script_lang_js_","_getSonglistDetail","_this","params","coverImgUrl","tracks","ids","song","push","songDetail","ListView","songlist_detail_SonglistDetailvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-d010b8ac.b6ac2dc2.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SonglistDetail.vue?vue&type=style&index=0&id=1a733ae6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SonglistDetail.vue?vue&type=style&index=0&id=1a733ae6&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListView.vue?vue&type=style&index=0&id=1563ba3c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListView.vue?vue&type=style&index=0&id=1563ba3c&lang=scss&scoped=true&\"","import { domain } from 'api/config'\r\nimport Stroage from './stroage'\r\nimport axios from 'axios'\r\n\r\n// eslint-disable-next-line\r\nconst stroage = new Stroage('like')\r\n\r\nclass Song {\r\n  constructor({ id, name, singer, image, duration, like }) {\r\n    this.id = id\r\n    this.name = name\r\n    this.singer = singer\r\n    this.image = image\r\n    this.duration = duration\r\n    this.like = like\r\n  }\r\n\r\n  getUrl() {\r\n    return axios.get(`${domain}/song/url?id=${this.id}`).then(res => {\r\n      let url = res.data.data[0].url\r\n      return url\r\n    })\r\n  }\r\n\r\n  getLyric() {\r\n    return axios.get(`${domain}/lyric?id=${this.id}`).then(res => {\r\n      if (res.data.nolyric) {\r\n        return ''\r\n      }\r\n      let lyric = res.data.lrc.lyric\r\n      return lyric\r\n    })\r\n  }\r\n}\r\n\r\nSong.getDetail = function(id) {\r\n  return axios.get(`${domain}/song/detail?ids=${id}`).then(res => {\r\n    return res.data.songs\r\n  })\r\n}\r\n\r\nfunction filterName(arr) {\r\n  let singer = ''\r\n  arr.forEach((item, index) => {\r\n    index === arr.length - 1 ? singer += item.name : singer += item.name + ' / '\r\n  })\r\n  return singer\r\n}\r\n\r\nfunction like(id) {\r\n  let arr = stroage.get()\r\n  for (let i = 0; i < arr.length; i++) {\r\n    if (arr[i] === id.toString()) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nfunction createSong(data) {\r\n  return new Song({\r\n    id: data.id,\r\n    name: data.name,\r\n    singer: filterName(data.ar),\r\n    image: data.al.picUrl,\r\n    duration: data.dt / 1000,\r\n    like: like(data.id)\r\n  })\r\n}\r\n\r\nexport {\r\n  Song,\r\n  createSong\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"playlist-detail\"},[_c('div',{ref:\"header\",staticClass:\"header\"},[_c('h2',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"iconfont icon-fanhui\"})])]),_c('div',{ref:\"bgImage\",staticClass:\"bg\",style:(_vm.bgImageStyle())},[_c('div',{staticClass:\"filter\"}),_c('div',{staticClass:\"play-wrapper\"},[_c('div',{ref:\"play\",staticClass:\"play\",on:{\"click\":_vm.playAll}},[_c('i',{staticClass:\"iconfont icon-zanting\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"播放全部\")])])])]),_c('div',{ref:\"songlistContainer\",staticClass:\"songlist-container\"},[_c('Scroll',{attrs:{\"data\":_vm.songlist,\"probeType\":3},on:{\"scroll\":_vm.scroll}},[_c('ul',{staticClass:\"songlist\"},_vm._l((_vm.songlist),function(item,index){return _c('li',{key:item.id,staticClass:\"songlist-item\",on:{\"click\":function($event){return _vm.selectItem(index)}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.rank),expression:\"rank\"}],staticClass:\"rank\"},[_c('span',{class:_vm.normalRank(index+1),domProps:{\"textContent\":_vm._s(index > 2 ? index : '')}})]),_c('div',{staticClass:\"content\"},[_c('h2',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))]),_c('span',{staticClass:\"singer\"},[_vm._v(_vm._s(item.singer))])])])}),0)]),_c('div',{ref:\"bgLayer\",staticClass:\"bg-layer\"})],1),_c('Loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songlist.length),expression:\"!songlist.length\"}],attrs:{\"fixed\":true}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"playlist-detail\">\r\n    <div class=\"header\" ref=\"header\">\r\n      <h2 class=\"title\">{{ title }}</h2>\r\n      <div class=\"back\" @click=\"back\">\r\n        <i class=\"iconfont icon-fanhui\"></i>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"bg\" ref=\"bgImage\" :style=\"bgImageStyle()\">\r\n      <div class=\"filter\"></div>\r\n      <div class=\"play-wrapper\">\r\n        <div class=\"play\" ref=\"play\" @click=\"playAll\">\r\n          <i class=\"iconfont icon-zanting\"></i>\r\n          <span class=\"text\">播放全部</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"songlist-container\" ref=\"songlistContainer\">\r\n      <Scroll :data=\"songlist\" @scroll=\"scroll\" :probeType=\"3\">\r\n        <ul class=\"songlist\">\r\n          <li class=\"songlist-item\" :key=\"item.id\" v-for=\"(item,index) of songlist\" @click=\"selectItem(index)\">\r\n            <div class=\"rank\" v-show=\"rank\">\r\n              <span :class=\"normalRank(index+1)\" v-text=\"index > 2 ? index : ''\"></span>\r\n            </div>\r\n            <div class=\"content\">\r\n              <h2 class=\"name\">{{ item.name }}</h2>\r\n              <span class=\"singer\">{{ item.singer }}</span>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </Scroll>\r\n      <div class=\"bg-layer\" ref=\"bgLayer\"></div>\r\n    </div>\r\n\r\n    <Loading :fixed=\"true\" v-show=\"!songlist.length\"></Loading>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Scroll from 'components/scroll/Scroll'\r\nimport Loading from 'components/loading/Loading'\r\n\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport { prefixStyle } from 'base/js/dom'\r\nimport Mixin from 'base/js/mixin'\r\n\r\nconst transform = prefixStyle('transform')\r\n\r\nexport default {\r\n  mixins: [Mixin],\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    bgImage: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    songlist: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      rank: false\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'setPlaylist',\r\n      'setFullScreen',\r\n      'setCurrentSong',\r\n      'setSequenceList',\r\n      'setCurrentIndex',\r\n      'setPlaying'\r\n    ]),\r\n    back() {\r\n      this.$router.back()\r\n    },\r\n    bgImageStyle() {\r\n      return `background-image: url('${this.bgImage}')`\r\n    },\r\n    scroll({ y }) {\r\n      const bgLayer = this.$refs.bgLayer\r\n      const header = this.$refs.header\r\n      const bgImage = this.$refs.bgImage\r\n      if (!this.gapHeight) {\r\n        this.gapHeight = bgImage.clientHeight - header.clientHeight\r\n      }\r\n\r\n      if (Math.abs(y) > this.gapHeight) {\r\n        bgLayer.style[transform] = `translate3d(0, ${-this.gapHeight}px, 0)`\r\n        bgImage.style.paddingTop = 0\r\n        bgImage.style.height = header.clientHeight + 'px'\r\n        bgImage.style.zIndex = 10\r\n        this.$refs.play.style.display = 'none'\r\n      } else {\r\n        bgLayer.style[transform] = `translate3d(0, ${y}px, 0)`\r\n        bgImage.style.paddingTop = '70%'\r\n        bgImage.style.height = 0\r\n        bgImage.style.zIndex = 0\r\n        this.$refs.play.style.display = 'block'\r\n      }\r\n\r\n      if (y > 0) {\r\n        let scale = 1 + y / (bgImage.clientHeight - 110)\r\n        bgImage.style[transform] = `scale(${scale})`\r\n      }\r\n    },\r\n    selectItem(index) {\r\n      this.setFullScreen(true)\r\n      this.setPlaylist(this.songlist)\r\n      this.setSequenceList(this.songlist)\r\n      this.setCurrentIndex(index)\r\n      this.setCurrentSong(this.songlist[index])\r\n    },\r\n    playAll() {\r\n      if (this.songlist.length === 0) {\r\n        return\r\n      }\r\n      let index = 0\r\n      this.setPlaylist(this.songlist)\r\n      this.setSequenceList(this.songlist)\r\n      this.setCurrentIndex(index)\r\n      this.setCurrentSong(this.songlist[index])\r\n      this.setPlaying(true)\r\n    },\r\n    normalRank(index) {\r\n      if (index === 1) return 'icon icon1'\r\n      if (index === 2) return 'icon icon2'\r\n      if (index === 3) return 'icon icon3'\r\n      return 'text'\r\n    },\r\n    _initData() {\r\n      // 控制动画的一个变量，代表header底部距离bg底部的距离\r\n      this.gapHeight = null\r\n\r\n      this.rank = this.$route.path.split('/')[1] === 'rank' ? true : false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'playlist'\r\n    ])\r\n  },\r\n  components: {\r\n    Scroll,\r\n    Loading\r\n  },\r\n  watch: {\r\n    playlist(list) {\r\n      this._resetScroll(list, this.$refs.songlistContainer)\r\n    }\r\n  },\r\n  created() {\r\n    this._initData()\r\n  },\r\n  mounted() {\r\n    this._resetScroll(this.playlist, this.$refs.songlistContainer)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  @import 'base/styles/variable.scss';\r\n\r\n  .playlist-detail {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    background-color: $theme-back-color;\r\n\r\n    .loading {\r\n      top: 100px;\r\n    }\r\n\r\n    .header {\r\n      position: relative;\r\n      height: 40px;\r\n      z-index: 11;\r\n\r\n      .back {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 40px;\r\n        line-height: 40px;\r\n        text-align: center;\r\n\r\n        .iconfont {\r\n          color: $theme-color;\r\n          font-size: 20px;\r\n          font-weight: bold;\r\n        }\r\n      }\r\n\r\n      .title {\r\n        width: 70%;\r\n        height: 40px;\r\n        margin: 0 auto;\r\n        color: #ffffff;\r\n        line-height: 40px;\r\n        text-align: center;\r\n        @extend .text-overflow\r\n      }\r\n    }\r\n\r\n    .bg {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      padding-top: 70%;\r\n      overflow: hidden;\r\n      background-color: $theme-back-color;\r\n      background-size: cover;\r\n      background-repeat: no-repeat;\r\n\r\n      .bg-image {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n      }\r\n\r\n      .filter {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: rgba(7,17,27,.4);\r\n      }\r\n\r\n      .play-wrapper {\r\n        position: absolute;\r\n        bottom: 20px;\r\n        width: 100%;\r\n        z-index: 20;\r\n\r\n        .play {\r\n          box-sizing: border-box;\r\n          width: 120px;\r\n          padding: 5px 0;\r\n          margin: 0 auto;\r\n          border: 1px solid $theme-color;\r\n          border-radius: 100px;\r\n          text-align: center;\r\n          line-height: 16px;\r\n          color: $theme-color;\r\n\r\n          .iconfont {\r\n            position: relative;\r\n            top: 1px;\r\n            font-size: 16px;\r\n            margin-right: 6px;\r\n          }\r\n\r\n          .text {\r\n            font-size: 12px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .songlist-container {\r\n      position: fixed;\r\n      top: 263px;\r\n      bottom: 0;\r\n      width: 100%;\r\n\r\n      .scroll-wrapper {\r\n        overflow: visible;\r\n      }\r\n\r\n      .songlist {\r\n        padding: 20px 30px 0 30px;\r\n\r\n        .songlist-item {\r\n          display: flex;\r\n          flex-direction: row;\r\n          align-items: center;\r\n          height: 64px;\r\n\r\n          .rank {\r\n            width: 25px;\r\n            margin-right: 30px;\r\n            text-align: center;\r\n\r\n            .text {\r\n              font-size: 18px;\r\n              color: $theme-color;\r\n            }\r\n\r\n            .icon {\r\n              display: inline-block;\r\n              width: 25px;\r\n              height: 24px;\r\n              background-size: 25px 24px;\r\n\r\n              &.icon1 {\r\n                background-image: url('../../base/image/first@2x.png');\r\n              }\r\n              &.icon2 {\r\n                background-image: url('../../base/image/second@2x.png');\r\n              }\r\n              &.icon3 {\r\n                background-image: url('../../base/image/third@2x.png');\r\n              }\r\n            }\r\n          }\r\n\r\n          .content {\r\n            flex: 1;\r\n            overflow: hidden;\r\n\r\n            .name {\r\n              width: 100%;\r\n              color: #ffffff;\r\n              font-size: 14px;\r\n              line-height: 21px;\r\n              @extend .text-overflow\r\n            }\r\n\r\n            .singer {\r\n              display: block;\r\n              color: hsla(0,0%,100%,.3);\r\n              font-size: 12px;\r\n              margin-top: 4px;\r\n              line-height: 21px;\r\n              @extend .text-overflow\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      .bg-layer {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        bottom: 0;\r\n        width: 100%;\r\n        z-index: -10;\r\n        background-color: $theme-back-color;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListView.vue?vue&type=template&id=1563ba3c&scoped=true&\"\nimport script from \"./ListView.vue?vue&type=script&lang=js&\"\nexport * from \"./ListView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListView.vue?vue&type=style&index=0&id=1563ba3c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1563ba3c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"songDetail\",staticClass:\"song-detail\"},[_c('ListView',{attrs:{\"title\":_vm.title,\"bgImage\":_vm.bgImage,\"songlist\":_vm.songlist}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios'\r\nimport { domain } from './config'\r\n\r\nexport function getSonglistDetail(id) {\r\n  return axios.get(domain + `/playlist/detail?id=${id}`).then(res => {\r\n    return res.data.playlist\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"song-detail\" ref=\"songDetail\">\r\n    <ListView :title=\"title\" :bgImage=\"bgImage\" :songlist=\"songlist\"></ListView>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport { getSonglistDetail } from 'api/song'\r\nimport { Song, createSong } from 'base/js/song'\r\nimport Mixin from 'base/js/mixin'\r\nimport ListView from 'components/listview/ListView'\r\n\r\nexport default {\r\n  mixins: [Mixin],\r\n  data() {\r\n    return {\r\n      title: '',\r\n      bgImage: '',\r\n      songlist: []\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'playlist'\r\n    ])\r\n  },\r\n  methods: {\r\n    _getSonglistDetail() {\r\n      let id = this.$route.params.id\r\n      getSonglistDetail(id)\r\n        .then(res => {\r\n          this.title = res.name\r\n          this.bgImage = res.coverImgUrl\r\n\r\n          let list = res.tracks\r\n          let ids = ''\r\n          list.forEach((item, index) => {\r\n            ids += (index === list.length - 1 ? item.id : item.id + ',')\r\n          })\r\n\r\n          return Song.getDetail(ids)\r\n        })\r\n        .then((res) => {\r\n          let songlist = []\r\n          res.forEach((item, index) => {\r\n            songlist.push(createSong(item))\r\n          })\r\n          this.songlist = songlist\r\n        })\r\n    }\r\n  },\r\n  watch: {\r\n    playlist() {\r\n      this._resetScroll(this.playlist, this.$refs.songDetail)\r\n    }\r\n  },\r\n  components: {\r\n    ListView\r\n  },\r\n  created() {\r\n    this._getSonglistDetail()\r\n  },\r\n  mounted() {\r\n    this._resetScroll(this.playlist, this.$refs.songDetail)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .song-detail {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    background-color: #333;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SonglistDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SonglistDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SonglistDetail.vue?vue&type=template&id=1a733ae6&scoped=true&\"\nimport script from \"./SonglistDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./SonglistDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SonglistDetail.vue?vue&type=style&index=0&id=1a733ae6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a733ae6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}